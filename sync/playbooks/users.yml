- hosts: all
  become: true
  
  tasks:
    - name: Read vars of variables.yml file
      include_vars:
        file: ../variables.yml
        name: stuff

    - name: Add several users (HEAD - /home directory)
      user: 
        name: "{{ item }}"
        state: present
      loop: "{{ stuff.users }}"
      when: ansible_hostname == "head"

    - name: Add several users (COMPUTES - without /home)
      user: 
        name: "{{ item }}"
        state: present
        create_home: no
      loop: "{{ stuff.users }}"
      when: ansible_hostname != "head"